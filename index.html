<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parrilla IPTV - JWPlayer</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="//ssl.p.jwpcdn.com/player/v/8.21.0/jwplayer.js"></script>
  <script>jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';</script>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #111;
      color: white;
    }

    h1 {
      text-align: center;
      padding: 10px;
      color: #e50914;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
      padding: 20px;
    }

    .card {
      background: #1c1c1c;
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      transition: 0.2s ease;
    }

    .card:hover {
      transform: scale(1.03);
    }

    .card img {
      width: 100px;
      height: 100px;
      object-fit: contain;
      margin-bottom: 8px;
      border-radius: 6px;
      background: #000;
    }

    .card .name {
      font-size: 1em;
      color: white;
    }

    .card .status.online {
      color: #00ff00;
      font-size: 0.9em;
    }

    .card .status.offline {
      color: #ff4444;
      font-size: 0.9em;
    }

    #playerContainer {
      padding: 10px;
      margin: 0 auto;
      max-width: 800px;
    }

    #player {
      width: 100%;
      aspect-ratio: 16 / 9;
    }
  </style>
</head>
<body>
  <h1>Canales en Vivo</h1>
  <div id="grid" class="grid"></div>

  <div id="playerContainer">
    <div id="player"></div>
  </div>

  <script>
    const channels = [
      {
        name: "espn",
        logo: "data:image/png;base64,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",
        url: "http://167.86.72.150/streams/dgo/index.m3u8"
      },
      {
        name: "espn 2",
        logo: "data:image/png;base64,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",
        url: "http://45.235.37.254/espn2hd/tracks-v1a1/mono.m3u8"
      },
      {
        name: "Infantil",
        logo: "https://upload.wikimedia.org/wikipedia/commons/e/e4/Toon_Goggles_logo.png",
        url: "https://invalid-url.com/broken.m3u8"
      }
    ];

    function createCard(channel, status) {
      const div = document.createElement("div");
      div.className = "card";
      div.onclick = () => playChannel(channel.url, channel.name);

      const img = document.createElement("img");
      img.src = channel.logo;
      img.onerror = () => img.src = "https://via.placeholder.com/100x100?text=Logo";

      const name = document.createElement("div");
      name.className = "name";
      name.textContent = channel.name;

      const state = document.createElement("div");
      state.className = "status " + status;
      state.textContent = status === "online" ? "ðŸ”´ EN VIVO" : "âš« Sin seÃ±al";

      div.appendChild(img);
      div.appendChild(name);
      div.appendChild(state);
      return div;
    }

    function playChannel(url, name) {
      jwplayer("player").setup({
        file: url,
        width: "100%",
        aspectratio: "16:9",
        autostart: true,
        title: name,
      });
    }

    async function checkStatus(url) {
      return new Promise((resolve) => {
        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(url);
          hls.on(Hls.Events.MANIFEST_PARSED, () => resolve("online"));
          hls.on(Hls.Events.ERROR, () => resolve("offline"));
          setTimeout(() => resolve("offline"), 5000);
        } else {
          const video = document.createElement("video");
          video.src = url;
          video.onloadedmetadata = () => resolve("online");
          video.onerror = () => resolve("offline");
          setTimeout(() => resolve("offline"), 5000);
        }
      });
    }

    async function loadChannels() {
      const grid = document.getElementById("grid");
      for (const ch of channels) {
        const status = await checkStatus(ch.url);
        const card = createCard(ch, status);
        grid.appendChild(card);
      }
    }

    loadChannels();
  </script>
</body>
</html>
